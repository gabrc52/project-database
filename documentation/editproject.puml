@startuml
actor Editor
actor Approvers
participant editproject.py
participant performeditproject.py
participant authutils.py
participant valutils.py
database Database

Editor -> editproject.py : Submit
editproject.py -> performeditproject.py : Edit project
performeditproject.py -> authutils.py : Check edit permission
authutils.py -> performeditproject.py : Return edit permission
performeditproject.py -> valutils.py : Validate content
valutils.py -> performeditproject.py : Return validation result

alt Editor is not authorized or content is invalid

    performeditproject.py -> Editor : Display failure page with error info

else Editor is authorized and content is valid

    alt Editor is an approver

        performeditproject.py -> Database : Update project (put same content in display table and buffer table)

    else Editor is not an approver

        performeditproject.py -> Database : Update project (only put content in buffer table, set buffer table status to "awaiting_approval")

    end

    alt Status is "rejected"
        
        performeditproject.py -> Database : Set status to "awaiting_approval"
        performeditproject.py -> Approvers : Send email

    end

    performeditproject.py -> Editor : Display success page

end

@enduml
